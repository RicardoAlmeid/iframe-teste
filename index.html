<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escala de Esfor√ßo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .title {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .slider-container {
            width: 100%;
            max-width: 800px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        .name {
            font-size: 1.2em;
            margin-right: 10px;
            white-space: nowrap;
            width: 100px; /* Define a largura fixa */
            text-align: center; /* Centraliza o texto */
        }
        .slider-wrapper {
            display: flex;
            align-items: center;
            width: 500px;
        }
        .slider {
            flex-grow: 1;
            margin: 0 10px;
        }
        .value {
            font-size: 2em;
            margin-left: 10px;
        }
        .add-button {
            font-size: 2em;
            cursor: pointer;
            margin-top: 20px;
        }
        .delete-button {
            font-size: 1.2em;
            cursor: pointer;
            margin-right: 10px;
            color: red;
        }
        /* Modal styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            padding-top: 60px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* Could be more or less, depending on screen size */
            max-width: 400px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .modal-button {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="title">Escala de esfor√ßo</div>
    <div id="sliders">
        <div class="slider-container" id="slider0">
            <div class="delete-button" id="delete0">X</div>
            <div class="name" id="name0">Ricardo</div>
            <div class="slider-wrapper">
                <input type="range" min="0" max="9" value="0" class="slider" id="effortSlider0">
                <div class="value" id="emojiValue0">‚ûñ</div>
            </div>
        </div>
    </div>
    <div class="add-button" id="addButton">+</div>

    <!-- The Modal -->
    <div id="nameModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p>Digite o nome do colaborador:</p>
            <input type="text" id="nameInput" maxlength="10">
            <button id="modalOkButton" class="modal-button">OK</button>
            <button id="modalCancelButton" class="modal-button">Cancelar</button>
        </div>
    </div>

    <script>
        const emojis = ["üò¥", "ü•±", "üòí", "üòì", "üòé", "üò•", "üòü", "üò©", "üò®", "ü•µ"];
        let sliderCount = 1;

        function formatName(name) {
            if (name.length > 10) {
                return name.substring(0, 10); // Trunca o nome se for maior que 10 caracteres
            } else {
                return name.padEnd(10, ' '); // Preenche com espa√ßos se for menor que 10 caracteres
            }
        }

        function createSlider(id, name) {
            const sliderContainer = document.createElement('div');
            sliderContainer.className = 'slider-container';
            sliderContainer.id = `slider${id}`;

            const deleteButton = document.createElement('div');
            deleteButton.className = 'delete-button';
            deleteButton.id = `delete${id}`;
            deleteButton.textContent = 'X';
            deleteButton.addEventListener('click', function() {
                document.getElementById(`slider${id}`).remove();
            });

            const nameDiv = document.createElement('div');
            nameDiv.className = 'name';
            nameDiv.id = `name${id}`;
            nameDiv.textContent = formatName(name);

            const sliderWrapper = document.createElement('div');
            sliderWrapper.className = 'slider-wrapper';

            const slider = document.createElement('input');
            slider.type = 'range';
            slider.min = '0';
            slider.max = '9';
            slider.value = '0'; // Valor inicial definido como 0
            slider.className = 'slider';
            slider.id = `effortSlider${id}`;

            const valueDiv = document.createElement('div');
            valueDiv.className = 'value';
            valueDiv.id = `emojiValue${id}`;
            valueDiv.textContent = '‚ûñ';

            slider.addEventListener('input', function() {
                valueDiv.textContent = emojis[slider.value];
            });

            sliderWrapper.appendChild(slider);
            sliderWrapper.appendChild(valueDiv);

            sliderContainer.appendChild(deleteButton);
            sliderContainer.appendChild(nameDiv);
            sliderContainer.appendChild(sliderWrapper);

            return sliderContainer;
        }

        // Get the modal
        const modal = document.getElementById("nameModal");

        // Get the button that opens the modal
        const btn = document.getElementById("addButton");

        // Get the <span> element that closes the modal
        const span = document.getElementsByClassName("close")[0];

        // Get the OK and Cancel buttons
        const okButton = document.getElementById("modalOkButton");
        const cancelButton = document.getElementById("modalCancelButton");

        // When the user clicks the button, open the modal
        btn.onclick = function() {
            modal.style.display = "block";
        }

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        // When the user clicks on OK button, add the slider
        okButton.onclick = function() {
            const nameInput = document.getElementById("nameInput").value;
            if (nameInput) {
                const newSlider = createSlider(sliderCount, nameInput);
                document.getElementById('sliders').appendChild(newSlider);
                sliderCount++;
                modal.style.display = "none";
                document.getElementById("nameInput").value = ""; // Clear the input field
            }
        }

        // When the user clicks on Cancel button, close the modal
        cancelButton.onclick = function() {
            modal.style.display = "none";
        }

        // Initialize the first slider
        document.getElementById('effortSlider0').addEventListener('input', function() {
            document.getElementById('emojiValue0').textContent = emojis[this.value];
        });

        document.getElementById('delete0').addEventListener('click', function() {
            document.getElementById('slider0').remove();
        });
    </script>
</body>
</html>